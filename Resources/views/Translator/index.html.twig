{% extends 'KunstmaanTranslatorBundle:Default:layout.html.twig' %}

{% block header %}
<div class="page-header">
    <h1>{{ 'translator.translator.title'|trans }}</h1>
    <div class="extra_actions_header">
        <div class="btn-group pull-right">
            <a class="btn btn-primary btn-medium" href="">Export</a>
            <a class="btn btn-primary btn-medium" href="{{ path('KunstmaanTranslatorBundle_translations_import_bundle', { domain: domain }) }}">Import</a>
            <a class="btn btn-primary btn-medium" href="">Rebuild cache</a>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}


<ul class="nav nav-tabs">
    {% for domainItem in domains %}
    <li class="{% if domain == domainItem.name %}active{% endif %}" onclick="window.location = $(this).find('a').attr('href');">
        <a data-toggle="tab" href="{{ path('KunstmaanTranslatorBundle_translations_show', { domain : domainItem.name }) }}">{{ domainItem.name }}</a>
    </li>
    {% endfor %}
</ul>

{% if translationGroups|length <= 0 %}
    <h3>No translations found for the chosen domain</h3>
{% else %}

<form method="post" action="{{ path('KunstmaanTranslatorBundle_translations_save') }}">

    <input type="hidden" name="domain" value="{{ domain }}" />

    <div class="table_overflow_fix">
        <table class="table table-striped table-bordered table-sortable responsive">
            <thead>
                <tr>
                    <th>Domain</th>
                    <th>Keyword</th>
                    {% for locale in managedLocales %}<th>{{ locale|upper }}</th>{% endfor %}
                </tr>
            </thead>

            <tbody>
                {% for group in translationGroups %}
                    <tr>
                        <td>{{ domain }}</td>
                        <td>{{ group.keyword }}</td>
                        {% for locale in managedLocales %}
                            <td><input value="{{ group.getTranslationTextByLocale(locale) }}" name="translation[{{ domain }}][{{ group.keyword }}][{{ locale }}]" /></td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


    <div class="input_prop">
        <div class="btn_group">
            <button type="reset" onclick="window.location = '{{ path('KunstmaanTranslatorBundle_translations_show', { domain : domain }) }}'" class="btn">Cancel</button>
            <button type="submit" class="btn btn-primary">Save translations</button>
        </div>
    </div>
</form>
{% endif %}

{% endblock %}